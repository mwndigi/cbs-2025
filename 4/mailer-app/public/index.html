<html>

<head>
  <title>Mailer App</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <h1>Mailer App</h1>
  <form id="mailForm">
    <label for="recipients">To:</label>
    <input type="email" id="recipients" name="recipients" required><br><br>

    <label for="subject">Subject:</label>
    <input type="text" id="subject" name="subject" required><br><br>

    <label for="message">Message:</label>
    <textarea id="message" name="message" required></textarea><br><br>

    <button type="submit">Send Mail</button>
  </form>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('mailForm').addEventListener('submit', async (e) => {
      e.preventDefault(); // Stopper default GET request fra form
      const sendTo = document.getElementById('recipients').value;
      const sendSubject = document.getElementById('subject').value;
      const sendText = document.getElementById('message').value;

      const response = await fetch('/mail', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ sendTo, sendSubject, sendText })
      });
      const data = await response.json();
      console.log(response)
      console.log(data);
      alert(data.message);
    });
  });
  </script>
</body>

</html>
